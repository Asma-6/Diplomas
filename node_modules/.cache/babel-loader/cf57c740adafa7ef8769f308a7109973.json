{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Documents\\\\Asma\\\\PFA\\\\salma\\\\app2\\\\Back\\\\src\\\\Components\\\\Login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, initialState, useEffect } from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Link from \"@material-ui/core/Link\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useHistory } from \"react-router-dom\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport authService from \"../../services/authService\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\"\n  },\n  image: {\n    backgroundImage: `url(${hihi})`,\n    backgroundRepeat: \"no-repeat\",\n    backgroundColor: theme.palette.type === \"light\" ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\"\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\",\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\nexport default function Login({\n  user,\n  userInfo\n}) {\n  _s();\n\n  const history = useHistory();\n  const classes = useStyles();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(initialState);\n  const [errors, setErrors] = useState(initialState);\n  const [message, setMessage] = useState(initialState);\n  const [loading, setLoading] = useState(initialState);\n  useEffect(() => {\n    var _userInfo$roles$, _userInfo$roles$2;\n\n    if (user && (userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$roles$ = userInfo.roles[0]) === null || _userInfo$roles$ === void 0 ? void 0 : _userInfo$roles$.id) !== 2) {\n      history.push(\"/profile\");\n    } else if (user && (userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$roles$2 = userInfo.roles[0]) === null || _userInfo$roles$2 === void 0 ? void 0 : _userInfo$roles$2.id) === 2) {\n      history.push(\"/admin\");\n    }\n  });\n\n  const handleChangePassword = e => {\n    const password = e.target.value;\n    setPassword(password);\n\n    if ((password === null || password === void 0 ? void 0 : password.length) === 0) {\n      setErrors({ ...errors,\n        password: \"Password required\"\n      });\n    } else {\n      setErrors({ ...errors,\n        password: null\n      });\n      if ((password === null || password === void 0 ? void 0 : password.length) < 8) setErrors({ ...errors,\n        password: \"Password must be equal or greater than 8\"\n      });\n    }\n  };\n\n  const handleChangeUsername = e => {\n    const username = e.target.value;\n    setUsername(username);\n\n    if ((username === null || username === void 0 ? void 0 : username.length) === 0) {\n      setErrors({ ...errors,\n        username: \"Username or email required\"\n      });\n    } else {\n      setErrors({ ...errors,\n        username: null\n      });\n      if ((username === null || username === void 0 ? void 0 : username.length) < 3) setErrors({ ...errors,\n        username: \"Username or email must be equal or greater than 3\"\n      });\n    }\n  };\n\n  const handLogin = e => {\n    e.preventDefault();\n\n    if (!Object.values(errors).some(x => x !== null && x !== \"\")) {\n      setLoading(true);\n      setMessage(\"\");\n      const usernamex = username === null || username === void 0 ? void 0 : username.toLowerCase();\n      authService.login(usernamex, password).then(() => {\n        history.push(\"/profile\");\n        window.location.reload();\n      }, error => {\n        const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n        setLoading(false);\n        setMessage(resMessage);\n      });\n    } else {\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    component: \"main\",\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: false,\n      sm: 4,\n      md: 7,\n      className: classes.image\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      sm: 8,\n      md: 5,\n      component: Paper,\n      elevation: 6,\n      square: true,\n      children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.root,\n        children: /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.paper,\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          className: classes.avatar,\n          children: /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h5\",\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: classes.form,\n          onSubmit: handLogin,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            value: username,\n            onChange: handleChangeUsername,\n            variant: \"outlined\",\n            margin: \"normal\",\n            fullWidth: true,\n            id: \"email\",\n            required: true,\n            label: \"Username Or Email\",\n            name: \"email\",\n            autoComplete: \"email\",\n            autoFocus: true,\n            error: Boolean(errors === null || errors === void 0 ? void 0 : errors.username),\n            helperText: errors === null || errors === void 0 ? void 0 : errors.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            value: password,\n            onChange: handleChangePassword,\n            variant: \"outlined\",\n            margin: \"normal\",\n            required: true,\n            fullWidth: true,\n            name: \"password\",\n            label: \"Password\",\n            type: \"password\",\n            id: \"password\",\n            autoComplete: \"current-password\",\n            error: Boolean(errors === null || errors === void 0 ? void 0 : errors.password),\n            helperText: errors === null || errors === void 0 ? void 0 : errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              value: \"remember\",\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 24\n            }, this),\n            label: \"Remember me\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            fullWidth: true,\n            variant: \"contained\",\n            color: \"primary\",\n            className: classes.submit,\n            children: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: true,\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                href: \"/\",\n                variant: \"body2\",\n                children: \"Forgot password?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                href: \"\",\n                onClick: e => {\n                  e.preventDefault();\n                  history.push(\"/register\");\n                },\n                variant: \"body2\",\n                children: \"Don't have an account? Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        onClose: () => {\n          setMessage(null);\n        },\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"Lghi3fSbYudcxgFqXngxVkHG50k=\", false, function () {\n  return [useHistory, useStyles];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/PC/Documents/Asma/PFA/salma/app2/Back/src/Components/Login/Login.js"],"names":["React","useState","initialState","useEffect","Avatar","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Link","Paper","Grid","LockOutlinedIcon","Typography","makeStyles","useHistory","LinearProgress","authService","Alert","useStyles","theme","root","width","image","backgroundImage","hihi","backgroundRepeat","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","marginTop","submit","Login","user","userInfo","history","classes","username","setUsername","password","setPassword","errors","setErrors","message","setMessage","loading","setLoading","roles","id","push","handleChangePassword","e","target","value","length","handleChangeUsername","handLogin","preventDefault","Object","values","some","x","usernamex","toLowerCase","login","then","window","location","reload","error","resMessage","response","data","toString","Boolean"],"mappings":"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","sourcesContent":["import React, { useState, initialState, useEffect } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport authService from \"../../services/authService\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  image: {\r\n    backgroundImage: `url(${hihi})`,\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundColor:\r\n      theme.palette.type === \"light\"\r\n        ? theme.palette.grey[50]\r\n        : theme.palette.grey[900],\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  paper: {\r\n    margin: theme.spacing(8, 4),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Login({ user, userInfo }) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(initialState);\r\n  const [errors, setErrors] = useState(initialState);\r\n  const [message, setMessage] = useState(initialState);\r\n  const [loading, setLoading] = useState(initialState);\r\n  useEffect(() => {\r\n    if (user && userInfo?.roles[0]?.id !== 2) {\r\n      history.push(\"/profile\");\r\n    } else if (user && userInfo?.roles[0]?.id === 2) {\r\n      history.push(\"/admin\");\r\n    }\r\n  });\r\n  const handleChangePassword = (e) => {\r\n    const password = e.target.value;\r\n    setPassword(password);\r\n    if (password?.length === 0) {\r\n      setErrors({ ...errors, password: \"Password required\" });\r\n    } else {\r\n      setErrors({ ...errors, password: null });\r\n      if (password?.length < 8)\r\n        setErrors({\r\n          ...errors,\r\n          password: \"Password must be equal or greater than 8\",\r\n        });\r\n    }\r\n  };\r\n  const handleChangeUsername = (e) => {\r\n    const username = e.target.value;\r\n    setUsername(username);\r\n    if (username?.length === 0) {\r\n      setErrors({ ...errors, username: \"Username or email required\" });\r\n    } else {\r\n      setErrors({ ...errors, username: null });\r\n      if (username?.length < 3)\r\n        setErrors({\r\n          ...errors,\r\n          username: \"Username or email must be equal or greater than 3\",\r\n        });\r\n    }\r\n  };\r\n  const handLogin = (e) => {\r\n    e.preventDefault();\r\n    if (!Object.values(errors).some((x) => x !== null && x !== \"\")) {\r\n      setLoading(true);\r\n      setMessage(\"\");\r\n      const usernamex = username?.toLowerCase();\r\n      authService.login(usernamex, password).then(\r\n        () => {\r\n          history.push(\"/profile\");\r\n          window.location.reload();\r\n        },\r\n        (error) => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n          setLoading(false);\r\n          setMessage(resMessage);\r\n        }\r\n      );\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <Grid container component=\"main\" className={classes.root}>\r\n      <CssBaseline />\r\n      <Grid item xs={false} sm={4} md={7} className={classes.image} />\r\n      <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\r\n        {loading && (\r\n          <div className={classes.root}>\r\n            <LinearProgress />\r\n          </div>\r\n        )}\r\n        <div className={classes.paper}>\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <form className={classes.form} onSubmit={handLogin}>\r\n            <TextField\r\n              value={username}\r\n              onChange={handleChangeUsername}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              fullWidth\r\n              id=\"email\"\r\n              required={true}\r\n              label=\"Username Or Email\"\r\n              name=\"email\"\r\n              autoComplete=\"email\"\r\n              autoFocus\r\n              error={Boolean(errors?.username)}\r\n              helperText={errors?.username}\r\n            />\r\n            <TextField\r\n              value={password}\r\n              onChange={handleChangePassword}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required={true}\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              error={Boolean(errors?.password)}\r\n              helperText={errors?.password}\r\n            />\r\n            <FormControlLabel\r\n              control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n              label=\"Remember me\"\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.submit}\r\n            >\r\n              Sign In\r\n            </Button>\r\n            <Grid container>\r\n              <Grid item xs>\r\n                <Link href=\"/\" variant=\"body2\">\r\n                  Forgot password?\r\n                </Link>\r\n              </Grid>\r\n              <Grid item>\r\n                <Link\r\n                  href=\"\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    history.push(\"/register\");\r\n                  }}\r\n                  variant=\"body2\"\r\n                >\r\n                  {\"Don't have an account? Sign Up\"}\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          </form>\r\n        </div>\r\n        {message && (\r\n          <Alert\r\n            severity=\"error\"\r\n            onClose={() => {\r\n              setMessage(null);\r\n            }}\r\n          >\r\n            {message}\r\n          </Alert>\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}